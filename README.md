Read Me
# Back-End

Canvas: https://docs.google.com/document/d/15fyHtDMsf4l-Qv8TlZEEhR0hsTqma8a5Z82tCZxhawU/edit

# DevDesk Queue

This is the repository for **DevDesk Queue Back End** project.

# API URL
https://devdeskbe.herokuapp.com

# Endpoints

| Method | URL | Description |
| -- | -- | -- |
| Users | -- | -- |
| POST | /auth/user/register |Adds user creds to DB. Returns id, full_name, email of user, and JWT |
| POST | /auth/user/login | Allows user access. Returns the user info, success message, and JWT |
| GET | /auth/user/ | Returns all the users in the db|


| Method | URL | Description |
| -- | -- | -- |
| Admin | -- | -- |
| POST | /auth/admin/register |Adds user creds to DB. Returns id, full_name, email of user, and JWT |
| POST | /auth/admin/login | Allows Admin access. Returns the user info, success message, and JWT |
| GET | /auth/admin | Returns all the admins in the db|


| Method | URL | Description |
| -- | -- | -- |
| Tickets | -- | -- |
| GET | /api/tickets |Return all the ticket |
| GET | /api/tickets/:user_id |Return all the ticket for a specific id |
| POST | /api/tickets/:user_id |Create new ticket for a specific user|
| PUT | /api/ticket/ticket_id| Edits ticket at ticket_id |



# Schema

### Users

| field | data type        | metadata |
| ----- | ---------------- | -- |
| id    | unsigned integer | primary key, auto-increments, generated by database |
| full_name | string        | required|
| password | string | required, encrypted by the server |
| email | string | required unique|
| role | string | required |
### User Object
```js
    {
        full_name: 'John Doe',
        email: 'john@doe.com'
        password: 'password1'
        role: "user"
    }
```
### User Return Object
```js
    {
    "data": {
        "message": "Successfully created a new user",
        "user": {
            "id": 1,
            "full_name": 'John Doe',
            "email": 'john@doe.com'
            "role": "user"
            "tickets": []
        },
        "token": "token"
    }
}
```

### Admin

| field | data type        | metadata |
| ----- | ---------------- | -- |
| id    | unsigned integer | primary key, auto-increments, generated by database |
| full_name | string        | required|
| password | string | required, encrypted by the server |
| email | string | required unique|

### Admin Object
```js
    {
        full_name: 'Admin Doe',
        email: 'admmin@doe.com'
        password: 'password1'
    }
```
### Admin Return Object
```js
     {
    "data": {
        "message": "Successfully created a new user",
        "user": {
            "id": 1,
            "full_name": 'John Doe',
            "email": 'john@doe.com'
            "role": "user"
            "tickets": []
        },
        "token" : "token"
```

### Tickets 
| field | data type        | metadata |
| ----- | ---------------- | -- |
| title    | string | required|
| attempted_solution | string | required |
| completed | boolean | required|
| user_id | integer | from the api user_id parameter|


### Ticket Object

```js 
    "title" : "Ticket tittle"
    "description" : "Ticket description"
    "attempted_solution" : "Ticket solution Attempted  by user"
    "completed" : "false"
    "user_id": "1" // from the api params
```

### Tickets Return Object

```js 
    {

    "message": "Fetch Successful",
    "ticket": {
        "ticket_id": 2,
        "title": "Ticket tittle",
        "description": "Ticket description",
        "attempted_solution":"Ticket solution Attempted  by user",
        "created_at": "2020-01-31T22:55:39.100Z",
        "completed": false,
        "user_id": 1
    }
}

```

